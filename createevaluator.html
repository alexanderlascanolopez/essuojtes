<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>ESSU OJT EVALUATION SYSTEM</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Green - v4.9.0
  * Template URL: https://bootstrapmade.com/green-free-one-page-bootstrap-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Top Bar ======= -->
  <section id="topbar" class="d-flex align-items-center">
    <div class="container d-flex justify-content-center justify-content-md-between">
      <div class="contact-info d-flex align-items-center">
        <i class="bi bi-envelope-fill"></i><a href="mailto:contact@example.com">https://essu.edu.ph/</a>
        <i class="bi bi-phone-fill phone-icon"></i> Brgy. 10, Can-Avid, Philippines, 6806
      </div>
      <div class="social-links d-none d-md-block">
        <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
        <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
        <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
        <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></i></a>
      </div>
    </div>
  </section>

  <!-- ======= Header ======= -->
  <header id="header" class="d-flex align-items-center">
    <div class="container d-flex align-items-center">



      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto " href="admindashboard.html">Home</a></li>
        
          <li><a class="nav-link scrollto active" href="createevaluator.html">Create Evaluator</a></li>
             <li class="dropdown"><a ><span>Students</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
           
             
              <li><a href="registerstudents.html">Register</a></li>
              <li><a href="ojtenrolment.html">OJT Enrollment</a></li>
    
            </ul>
          </li>
           <li><a class="nav-link scrollto" href="evalresults.html">Evaluation Results</a></li>
              <li class="dropdown"><a ><span>Reports</span> <i class="bi bi-chevron-down"></i></a>
                <ul>
           
             
              <li><a href="students.html">Students</a></li>
              <li><a href="ojt.html">On-the-Job Trainees</a></li>
              <li><a href="evaluationreports.html">Evaluations</a></li>
       
            </ul>
            </li>

                 <li class="dropdown"><a ><span>Settings</span> <i class="bi bi-chevron-down"></i></a>
                <ul>
           
             
              <li><a href="updateprofile.html">Account Settings</a></li>
              <li><a href="newaccount.html">New Account</a></li>
              <li><a href="odip.html">ESSU-ODIP-107a </a></li>
       
       
            </ul>
            </li>
          <li><a class="nav-link scrollto" href="adminlogin.html">Logout</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->




  <main id="main">

<hr>
 <!-- ======= Breadcrumbs ======= -->
    <section id="contact" class="contact">
      <div class="container">

       

        <div class="row">

          <div class="col-lg-5 d-flex align-items-stretch">
          
                      <form  role="form" class="php-email-form">

                        <h2>Add New Evaluator</h2>

                          <div class="row">
                <div class="form-group col-md-6">
                  <label for="name">Evaluator ID Number</label>
                  <input type="text" class="form-control" id="sn" readonly>
                </div>
                
              </div>
              <div class="row">
                <div class="form-group col-md-6">
                  <label >First Name</label>
                  <input type="text" name="name" class="form-control" id="fname"  required>
                </div>
                <div class="form-group col-md-6 mt-3 mt-md-0">
                  <label >Middle Name</label>
                  <input type="text" class="form-control" id="mname" required>
                </div>
              </div>
                <div class="row">
                <div class="form-group col-md-6">
                  <label >Last Name</label>
                  <input type="text" name="name" class="form-control" id="lname" required>
                </div>
                <div class="form-group col-md-6 mt-3 mt-md-0">
                  <label >Name Extension</label>
                  <input type="text" class="form-control" id="next" >
                </div>
              </div>
              <div class="form-group mt-3">
                <label >Company</label>
                   <input type="text" name="name" class="form-control" id="comp"  required>
              </div>

                   <div class="form-group mt-3">
                <label for="dep">Position</label>
                   <input type="text" name="name" class="form-control" id="pos"  required>
              </div>

                <div class="form-group mt-3">
                <label for="dep">Contact Number</label>
                   <input type="text" name="name" class="form-control" id="con"  required>
              </div>

                <div class="form-group mt-3">
                <label for="dep">Address</label>
                   <input type="text" name="name" class="form-control" id="add"  required>
              </div>

                <div class="row">
                <div class="form-group col-md-6">
                  <label >School Year</label>
                  <input type="text" name="name" class="form-control" id="sy"  required>
                </div>
                <div class="form-group col-md-6 mt-3 mt-md-0">
                  <label >Semester</label>
                 <select id ="prog"  class="form-control">
                            <option>1st Semester</option>
                            <option>2nd Semester</option>
                            <option>Summer Term</option>
                            </select> 
                </div>
              </div>


                   <div class="row">
                <div class="form-group col-md-6">
                  <label >Username</label>
                  <input type="text" name="name" class="form-control" id="uname"  readonly required>
                </div>
                <div class="form-group col-md-6 mt-3 mt-md-0">
                  <label >Password</label>
                  <input type="password" class="form-control" id="pword" readonly>
                </div>
              </div>

                  <div class="form-group mt-3">
                <label for="dep">Code</label>
                   <input type="text" name="name" class="form-control" id="code"  readonly>
              </div>

                  
           
             <table>
              <thead>
                <tr>
                </tr>

                <td>
                     <div class="text-center"><button id = "generate" type="submit">Generate Account</button></div>
                     

                </td>

                   <td>
                   
                      <div class="text-center"><button id = "submit" type="submit">Save</button></div>

                </td>

                </tr>

              </thead>

             </table>
             
            </form>
      

          </div>

          <div class="col-lg-7 mt-5 mt-lg-0 d-flex align-items-stretch">



            <form  class="php-email-form">

               <div class="form-group col-md-6 mt-3 mt-md-0">
                
                  <input type="text" class="form-control" id="search" placeholder="Enter evaluator name here..">
                </div>
<div style="overflow: scroll ;max-height: 550px; width: 100%;">

                <table id="allrecords"  class="table align-items-center mb-0">


                  <thead class="thead-light">
                    <tr>
                     
                     <th>Select</th>
                    <th hidden="">ID</th>
                     
                    <th scope="col">ID Number</th>
                        <th scope="col">Evaluator's Name</th>
                        <th scope="col">Company</th>
                         <th scope="col">Position</th>
                        
                      

                    
                     
                              </tr>
                  </thead>
                      <tbody class="customtable">

                  </tbody>
                  <caption>
                  <div id="e-paginator"></div>
                  </caption>
              </table>

            </div>
<br>

            <table>
              <thead>
                <tr>
                  <td>
                     <div class="text-center"><button id = "delete" type="submit">Delete</button></div>
                  </td>
                   <td>
                     <div class="text-center"><button id = "update" type="submit">Update</button></div>
                  </td>
                </tr>
              </thead>

            </table>
             
            </form>
          </div>

        </div>

      </div>
    </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
    
      <div class="social-links">
        <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
        <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
        <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
        <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
        <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
      </div>
      <div class="copyright">
         Logged in as:  <strong><span id = "curruser"></span></strong><br><br>
        &copy; Copyright <strong><span>ESSU Can-avid</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/green-free-one-page-bootstrap-template/ -->
        Developed by:<a href="#">BSIT STUDENTS,2022</a>
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

 <script src="bower_components/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="bower_components/jquery-ui/jquery-ui.min.js"></script>
<!-- Slimscroll -->
<script src="bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- fullCalendar -->
<script src="bower_components/moment/moment.js"></script>
<script src="bower_components/fullcalendar/dist/fullcalendar.min.js"></script>
<!-- Page specific script -->
<script>
  $(function () {

    const characters ='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';



            function getlatestevalID(){
                 

                          $.ajax({
                            type: "POST",
                            url: "php/getlatestid.php",
                            dataType: "json",
                              data: {
                                
                           
                              },
                            success: function(result){
                              var _res = result;
                              if(_res.status == 1){
                              
                              $("#sn").val(_res.unid);
                               getnewID();
                              } 
                            }
                          });}



          function getnewID(){

                         var anew= Number($("#sn").val()) + 1;
                         var wew = "000000" + anew
                         var lastChar = wew.substr(wew.length - 6);

                       
                          $("#sn").val(lastChar);

                      }







     $("#generate").click(function(){
                           
                              let result = ' ';
                              const charactersLength = characters.length;
                              for ( let i = 0; i < 8; i++ ) {
                              result += characters.charAt(Math.floor(Math.random() * charactersLength));
                                }        

                          $("#code").val(result);  
                          $("#uname").val(result);
                          $("#pword").val(result); 
   
                                  });







                  function phoneMask() { 
                                  var num = $(this).val().replace(/\D/g,''); 
                                  $(this).val(num.substring(0,1) + num.substring(1,2) + num.substring(2,3) + num.substring(3,4)+ '-' +  num.substring(4,5)+ num.substring(5,6)+ num.substring(6,7)+ num.substring(7,8)); 
                                  }
                  
                                      $("#sy").keyup(phoneMask);


                  function checkifloggedin(){

                      let x = decodeURIComponent(document.cookie);

                      if(x == "as"){


                        window.location="index.html"
                      }


                      else{

                         getcurrentuser(x);

                      }


                       



                  }


                 


                        function getcurrentuser(a){
                  

                                        $.ajax({
                                          type: "POST",
                                          url: "php/retrievecurrentuser.php",
                                          dataType: "json",
                                            data: {
                                              a:a, 
                                             
                                             
                                         
                                            },
                                          success: function(result){
                                            var _res = result;
                                            if(_res.status == 1){
                                          
                                             $("#curruser").text(_res.a1);
                                            
                                      
                                          
                                             
                                            } 
                                          }
                                        });}



                          $("#submit").click(function(){
                           
                          a= $("#sn").val();
                          b= $("#fname").val();
                          c= $("#mname").val();
                          d= $("#lname").val();
                          e= $("#next").val();
                          f = b+ " " + c + " " + d + " " + e
                          g= $("#comp").val();
                          j= $("#pos").val();
                          h= $("#sy").val();
                          i= $("#prog").val();
                          ko= $("#uname").val();
                          lo= $("#pword").val();
                          mo= $("#code").val();
                           n= $("#con").val();
                            o= $("#add").val();


                             var k = ko.replace(/^\s+|\s+$/gm,'');
                             var l = lo.replace(/^\s+|\s+$/gm,'');
                             var m = mo.replace(/^\s+|\s+$/gm,'');



                             if (m.length < 8){
                              alert("Please Generate an account!")
                                                           
                                              }
                              else{
                                        if (a.length > 0 && b.length > 0 ){
                                            savestudent(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o);
                                                
                                              }
                                      
                                        else {

                                              alert("Please complete missing fields!")
                                              }
          
                                }    
                                  });



      function savestudent(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){

                  $.ajax({
                  type: "POST",
                  url: "php/registerevaluator.php",
                  dataType: "json",
                  data: {
                      a:a,
                      b:b,
                      c:c,
                      d:d,
                      e:e,
                      f:f,
                      g:g,
                      h:h,
                      i:i,
                      j:j,
                      k:k,
                      l:l,
                      m:m,
                      n:n,
                      o:o,
                  
                            },
                        
                            success: function(result) {
                            var _res = result;
                              if (_res.status == 1){
                                      alert("Successfully saved!");
                                      window.location="createevaluator.html"
                           
                              } else if(_res.status == 2){
                                   alert("Code already exist!");
                                       
                                   
                          
                           
                              }
                              
                            }
                          
                             

                          });
                        }


    function loadstudents(){
      

                        $("#allrecords").find("tr.re-list").remove();
                        $.ajax({
                          type: "POST",
                          url: "php/evaluators.php",
                          dataType: "json",
                          data: {
                           
                            
                          },
                          success: function(result){
                            if(typeof(result.status) === 'undefined')
                              $.each(result, function(val, key) {
                                $("#allrecords tr:last").after("<tr class='re-list'>" + 
                                  "<td><input type='radio' name='chosen' value='" + key.evaluatorid + "' /></td>" +
                                       "<td>" + key.evaluatorid+ "</td>" +
                                        "<td>" + key.fullname+ "</td>" +
                                       "<td>" + key.company+ "</td>" +  
                                       "<td>" + key.position+ "</td>" +  
                                       
                                  

                                  "<td></td></tr>");




                              });
                              var rows = $('#allrecords').find('tr').length;
                              if(rows == 1)
                                $("#allrecords tr:last").after("<tr class='re-list'><td colspan='2'>No record to display.</td></tr>");
                      
                          }

                        });
    }




      $("#delete").click(function(){

                          var studnum = $('input[name=chosen]:checked').val();
     
                          var res = confirm("Are you sure you want to remove this evaluator?");
                          if(res == true){
                          deletestudent(studnum);
      
        }
      
    });



            function deletestudent(id){
              var type= "evaluator";

                              $.ajax({
                                type: "POST",
                                url: "php/delete.php",
                                dataType: "json",
                                data: {
                                  id: id,
                                  type:type,
                                },
                                success: function(result){
                                  if (result.status == 1) {
                                    alert("Selection deleted successfully.");
                                    window.location = "createevaluator.html";
                              
                               
                                  } else {
                                    alert("ERROR deleting data. Please try again.");
                                  }
                                }
                              });

                                  }


 $("#update").click(function(){
  
                          a= $("#curruser").text();
                          var studnum = $('input[name=chosen]:checked').val();
                          studenttemporary(a,studnum);
     
      
    });



      function studenttemporary(a,b){

                  $.ajax({
                  type: "POST",
                  url: "php/temp_evaluators.php",
                  dataType: "json",
                  data: {
                      a:a,
                      b:b,
                 
                  
                            },
                        
                            success: function(result) {
                            var _res = result;
                              if (_res.status == 1){
                                      window.location="updateevaluator.html"
                           
                              } else if(_res.status == 2){
                                    updatetempo(a,b);
                                       
                                   
                          
                           
                              }
                              
                            }
                          
                             

                          });
                        }

          function updatetempo(a,b){

                  $.ajax({
                  type: "POST",
                  url: "php/update_temp_evaluator.php",
                  dataType: "json",
                  data: {
                      a:a,
                      b:b,
                 
                  
                            },
                        
                            success: function(result) {
                            var _res = result;
                              if (_res.status == 1){
                                      window.location="updateevaluator.html"
                           
                              } else if(_res.status == 2){
                                   
                                       
                                   
                          
                           
                              }
                              
                            }
                          
                             

                          });
                        }



         $("#search").on("input", function(){
                            var ab = $("#search").val();
                           
                            filterstudents(ab);

                                });



                function filterstudents(a){
                        $("#allrecords").find("tr.re-list").remove();
                        $.ajax({
                          type: "POST",
                          url: "php/filterevaluators.php",
                          dataType: "json",
                          data: {
                           
                           a:a,
                            
                          },
                          success: function(result){
                            if(typeof(result.status) === 'undefined')
                              $.each(result, function(val, key) {
                                 $("#allrecords tr:last").after("<tr class='re-list'>" + 
                                  "<td><input type='radio' name='chosen' value='" + key.evaluatorid + "' /></td>" +
                                       "<td>" + key.evaluatorid+ "</td>" +
                                        "<td>" + key.fullname+ "</td>" +
                                       "<td>" + key.company+ "</td>" +  
                                       "<td>" + key.position+ "</td>" +  
                                  

                                  "<td></td></tr>");




                              });
                              var rows = $('#allrecords').find('tr').length;
                              if(rows == 1)
                                $("#allrecords tr:last").after("<tr class='re-list'><td colspan='2'>No record to display.</td></tr>");
                      
                          }

                        });
    }





          
            $(window).on("load",loadstudents()); 
            $(window).on("load",checkifloggedin()); 
             $(window).on("load",getlatestevalID()); 


  })
</script>

</html>